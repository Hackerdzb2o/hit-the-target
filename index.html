<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hit the Target Game</title>
  <!-- Favicon embedded as data URL -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><rect width='100%' height='100%' fill='%230f1724'/><circle cx='16' cy='16' r='10' fill='%23f59e0b'/></svg>">
  <style>
    :root{ --bg:#0b1220; --panel:#071226; --accent:#f59e0b; color-scheme: dark; }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Arial;background:linear-gradient(180deg,#071024,#030616);color:#e6eef8}
    .container{max-width:900px;margin:28px auto;padding:18px;background:rgba(255,255,255,0.02);border-radius:12px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px}
    h1{margin:0;font-size:20px}
    p.lead{margin:2px 0 0;color:#94a3b8;font-size:13px}
    canvas{display:block;margin:16px auto;border-radius:10px;background:linear-gradient(180deg,#041226,#021222);width:100%;height:520px;max-height:70vh;cursor:crosshair}
    .hud{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:8px}
    .panel{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;min-width:120px;text-align:center}
    .big{font-size:20px;font-weight:700}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:#0b1220;border:1px solid rgba(255,255,255,0.04);color:#e6eef8;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .muted{color:#94a3b8;font-size:13px}
    @media(max-width:640px){ canvas{height:48vh} }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="Hit the Target Game">
    <header>
      <div>
        <h1>Hit the Target Game</h1>
        <p class="lead">Gioco desktop: clicca il bersaglio per segnare punti.</p>
      </div>
      <div class="controls">
        <button id="startBtn">Avvia</button>
        <button id="resetBtn">Reset</button>
      </div>
    </header>

    <div class="hud" role="status" aria-live="polite">
      <div class="panel"><small class="muted">Tempo</small><div class="big" id="timeLeft">30</div></div>
      <div class="panel"><small class="muted">Punteggio</small><div class="big" id="score">0</div></div>
      <div style="flex:1"></div>
      <div class="panel" style="min-width:200px;text-align:left"><small class="muted">Istruzioni</small><div style="font-size:13px">Clicca il bersaglio con il mouse. Solo desktop. Nessun salvataggio.</div></div>
    </div>

    <canvas id="gameCanvas" width="900" height="520" tabindex="0" aria-label="Area di gioco"></canvas>

    <div style="margin-top:12px;color:#94a3b8;font-size:13px">File pronto per GitHub Pages. Vedi README per istruzioni di pubblicazione.</div>
  </div>

<script>
/* Hit the Target â€” versione desktop-only, senza suoni, senza salvataggio/levels */
const GAME_TIME = 30; // seconds
const BASE_RADIUS = 36;

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const scoreEl = document.getElementById('score');
const timeEl = document.getElementById('timeLeft');

let state = {
  running: false,
  score: 0,
  timeLeft: GAME_TIME,
  target: { x: 100, y: 100, r: BASE_RADIUS, vx: 80, vy: 60 }
};

function fitCanvas(){
  const rect = canvas.getBoundingClientRect();
  const dpr = window.devicePixelRatio || 1;
  canvas.width = Math.floor(rect.width * dpr);
  canvas.height = Math.floor(rect.height * dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener('resize', fitCanvas);
fitCanvas();

function spawnTarget(){
  const padding = 48;
  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  state.target.r = BASE_RADIUS;
  state.target.x = Math.random()*(w - 2*padding - 2*state.target.r) + padding + state.target.r;
  state.target.y = Math.random()*(h - 2*padding - 2*state.target.r) + padding + state.target.r;
  const angle = Math.random()*Math.PI*2;
  const speed = 80 + Math.random()*60;
  state.target.vx = Math.cos(angle)*speed;
  state.target.vy = Math.sin(angle)*speed;
}

function render(){
  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  ctx.clearRect(0,0,w,h);

  // background
  ctx.fillStyle = 'rgba(0,0,0,0.04)';
  ctx.fillRect(0,0,w,h);

  // target
  ctx.beginPath();
  ctx.fillStyle = '#ffb74d';
  ctx.arc(state.target.x, state.target.y, state.target.r, 0, Math.PI*2);
  ctx.fill();
  ctx.lineWidth = 2;
  ctx.strokeStyle = 'rgba(0,0,0,0.2)';
  ctx.stroke();

  // center
  ctx.beginPath();
  ctx.fillStyle = '#102030';
  ctx.arc(state.target.x, state.target.y, Math.max(3, state.target.r*0.12), 0, Math.PI*2);
  ctx.fill();

  scoreEl.textContent = state.score;
  timeEl.textContent = Math.ceil(state.timeLeft);
}

let lastFrame = performance.now();
function update(now){
  if(!state.running){ lastFrame = now; requestAnimationFrame(loop); return; }
  const dt = Math.min(0.1, (now - lastFrame)/1000);
  lastFrame = now;

  state.timeLeft -= dt;
  if(state.timeLeft <= 0){
    state.timeLeft = 0;
    state.running = false;
    alert('Tempo scaduto! Punteggio: ' + state.score);
  }

  // move target
  state.target.x += state.target.vx * dt;
  state.target.y += state.target.vy * dt;

  // bounce
  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  if(state.target.x - state.target.r < 0){ state.target.x = state.target.r; state.target.vx *= -1; }
  if(state.target.x + state.target.r > w){ state.target.x = w - state.target.r; state.target.vx *= -1; }
  if(state.target.y - state.target.r < 0){ state.target.y = state.target.r; state.target.vy *= -1; }
  if(state.target.y + state.target.r > h){ state.target.y = h - state.target.r; state.target.vy *= -1; }

  render();
  requestAnimationFrame(loop);
}
function loop(now){ update(now || performance.now()); }

canvas.addEventListener('click', (ev) => {
  if(!state.running) return;
  const rect = canvas.getBoundingClientRect();
  const x = ev.clientX - rect.left;
  const y = ev.clientY - rect.top;
  const dx = x - state.target.x;
  const dy = y - state.target.y;
  const dist = Math.sqrt(dx*dx + dy*dy);
  state.score++;
  if(dist <= state.target.r){
    // hit -> small respawn
    spawnTarget();
  } else {
    // miss -> nudge target slightly
    const push = 40;
    const nd = Math.max(dist,1);
    state.target.vx += (dx/nd) * -push;
    state.target.vy += (dy/nd) * -push;
  }
});

startBtn.addEventListener('click', () => {
  if(state.running) return;
  state.running = true;
  state.score = 0;
  state.timeLeft = GAME_TIME;
  spawnTarget();
  lastFrame = performance.now();
  requestAnimationFrame(loop);
});

resetBtn.addEventListener('click', () => {
  state.running = false;
  state.score = 0;
  state.timeLeft = GAME_TIME;
  spawnTarget();
  render();
});

// focus so keyboard can be used if desired
window.addEventListener('load', () => { canvas.focus(); render(); });
</script>
</body>
</html>
